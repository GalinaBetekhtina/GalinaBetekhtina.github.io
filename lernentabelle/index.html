<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Немецкие буквы</title>
<style>
  body {
    font-family: sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    background: #f2f2f2;
    margin: 0;
  }

  .grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 20px;
    width: 100%;
    padding: 1% 5%;
    box-sizing: border-box;
  }

  .letter {
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    border: 2px solid transparent;
    cursor: pointer;
    transition: transform 0.2s, border-color 0.2s;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    align-items: center;
    padding: 10px;
    min-height: 180px;
    overflow: hidden;
    box-sizing: border-box;
  }

  .letter:hover { border-color: orange; transform: scale(1.05); }
  .letter.active { border-color: orange; transform: scale(1.05); }

  .highlight { color: red; font-weight: 900; }
  .highlightm { color: blue; font-weight: 900; }
  .highlightn { color: green; font-weight: 900; }
  .highlightpl { color: orange; font-weight: 900; }

  .img-wrapper { flex: 1 1 auto; display: flex; justify-content: center; align-items: center; width: 100%; max-height: calc(100% - 30px); }
  .letter img { max-width: 100%; max-height: 100%; object-fit: contain; border-radius: 8px; transition: opacity 0.2s; }
  .letter.hide-img img { opacity: 0; pointer-events: none; }

  .letter span { display: block; font-size: 34px; font-weight: bold; margin-top: 10px; }

  .overlay {
    position: fixed;
    inset: 0;
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    background: rgba(0,0,0,0.45);
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
    opacity: 0;
    transition: opacity 0.2s ease;
  }

  .overlay.show { display: flex; opacity: 1; }

  .modal {
    background: white;
    border-radius: 14px;
    padding: 18px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.25);
    max-width: 90%;
    width: 400px;
    text-align: center;
  }

  @media (min-width: 1024px) {
    .modal { width: 500px; }
  }

  .modal-letter {
    display: inline-block;
    width: 100%;
    font-weight: 800;
    font-size: 50px; /* начальный размер */
    min-width: 48px;
    min-height: 48px;
    margin: 80px auto;
    white-space: nowrap; /* запрещаем перенос */
  }

  @media (max-width: 600px) {
    .letter span {
      white-space: nowrap;
      font-size: clamp(16px, 5vw, 28px);
    }
  }
</style>
</head>
<body>

 <div class="grid">
    <div class="letter" 
     data-sound="sounds/a_wie_ameise.mp3" 
     data-modal-text='die <span class="highlight">A</span>meise'>
  <div class="img-wrapper">
    <img src="images/ameise.jpg" alt="A">
  </div>
  <span>A a</span>
</div>

    <div class="letter" 
         data-sound="sounds/a_wie_affe.mp3"
         data-modal-text='der <span class="highlightm">A</span>ffe'>
      <div class="img-wrapper">
        <img src="images/affe.jpg" alt="A">
      </div>
      <span>A a</span>
    </div>

    <div class="letter" 
       data-sound="sounds/e_wie_esel.mp3"
       data-modal-text='der <span class="highlightm">E</span>sel'>
      <div class="img-wrapper">
        <img src="images/esel.jpg" alt="E">
      </div>
      <span>E e</span>
    </div>

    <div class="letter" 
       data-sound="sounds/e_wie_ente.mp3"
       data-modal-text='die <span class="highlight">E</span>nte'>
      <div class="img-wrapper">
        <img src="images/ente.jpg" alt="E">
      </div>
      <span>E e</span>
    </div>

    <div class="letter" 
        data-sound="sounds/i_wie_igel.mp3"
        data-modal-text='der <span class="highlightm">I</span>gel'>
      <div class="img-wrapper">
        <img src="images/igel.jpg" alt="I">
      </div>
      <span>I i</span>
    </div>

    <div class="letter" data-sound="sounds/i_wie_insel.mp3"
        data-modal-text='die <span class="highlight">I</span>nsel'>
      <div class="img-wrapper">
        <img src="images/insel.jpg" alt="I">
      </div>
      <span>I i</span>
    </div>

    <div class="letter" 
	data-sound="sounds/o_wie_ofen.mp3"
        data-modal-text='der <span class="highlightm">O</span>fen'>
      <div class="img-wrapper">
        <img src="images/ofen.jpg" alt="O">
      </div>
      <span>O o</span>
    </div>

    <div class="letter" 
	data-sound="sounds/o_wie_ordner.mp3"
        data-modal-text='der <span class="highlightm">O</span>rdner'>
      <div class="img-wrapper">
        <img src="images/ordner.jpg" alt="O">
      </div>
      <span>O o</span>
    </div>

    <div class="letter" 
	data-sound="sounds/u_wie_ufo.mp3"
	data-modal-text='das <span class="highlightn">U</span>FO'>
      <div class="img-wrapper">
        <img src="images/ufo.jpg" alt="U">
      </div>
      <span>U u</span>
    </div>

    <div class="letter" 
	data-sound="sounds/a_wie_aepfel.mp3"
	data-modal-text='die <span class="highlightpl">Ä</span>pfel'>
      <div class="img-wrapper">
        <img src="images/aepfel.jpg" alt="Ä">
      </div>
      <span>Ä ä</span>
    </div>

    <div class="letter" 
	data-sound="sounds/au_wie_auto.mp3"
	data-modal-text='das <span class="highlightn">Au</span>to'>
      <div class="img-wrapper">
        <img src="images/auto.jpg" alt="AU">
      </div>
      <span>Au au</span>
    </div>
    <div class="letter" 
	data-sound="sounds/ei_wie_eichhoernchen.mp3"
	data-modal-text='das <span class="highlightn">Ei</span>chhörnchen'>
      <div class="img-wrapper">
        <img src="images/eichhoernchen.jpg" alt="EI">
      </div>
      <span>Ei ei</span>
    </div>
    <div class="letter" 
	data-sound="sounds/eu_wie_eule.mp3"
	data-modal-text='die <span class="highlight">Eu</span>le'>
      <div class="img-wrapper">
        <img src="images/eule.jpg" alt="EU">
      </div>
      <span>Eu eu</span>
    </div>
    <div class="letter" 
	data-sound="sounds/oe_wie_oel.mp3"
	data-modal-text='das <span class="highlightn">Ö</span>l'>
      <div class="img-wrapper">
        <img src="images/oel.jpg" alt="Ö">
      </div>
      <span>Ö ö</span>
    </div>
    <div class="letter" 
	data-sound="sounds/ue_wie_ueberholverbot.mp3"
	data-modal-text='das <span class="highlightn">Ü</span>berholverbot'>
      <div class="img-wrapper">
        <img src="images/ueberholverbot.jpg" alt="Ü">
      </div>
      <span>Ü ü </span>
    </div>
    <div class="letter" 
	data-sound="sounds/m_wie_maus.mp3"
	data-modal-text='die <span class="highlight">M</span>aus'>
      <div class="img-wrapper">
        <img src="images/maus.jpg" alt="M">
      </div>
      <span>M m</span>
    </div>
    <div class="letter" 
	data-sound="sounds/s_wie_sonne.mp3"
	data-modal-text='die <span class="highlight">S</span>onne'>
      <div class="img-wrapper">
        <img src="images/sonne.jpg" alt="S">
      </div>
      <span>S s</span>
    </div>
    <div class="letter" 
	data-sound="sounds/d_wie_dino.mp3"
	data-modal-text='der <span class="highlightm">D</span>ino'>
      <div class="img-wrapper">
        <img src="images/dino.jpg" alt="D">
      </div>
      <span>D d</span>
    </div>
    <div class="letter" 
	data-sound="sounds/w_wie_wolf.mp3"
	data-modal-text='der <span class="highlightm">W</span>olf'>
      <div class="img-wrapper">
        <img src="images/wolf.jpg" alt="W">
      </div>
      <span>W w </span>
    </div>
    <div class="letter" data-sound="sounds/g_wie_gabel.mp3"
	data-modal-text='die <span class="highlight">G</span>abel'>
      <div class="img-wrapper">
        <img src="images/gabel.jpg" alt="G">
      </div>
      <span>G g </span>
    </div>
    <div class="letter" 
	data-sound="sounds/b_wie_baum.mp3"
	data-modal-text='der <span class="highlightm">B</span>aum'>
      <div class="img-wrapper">
        <img src="images/baum.jpg" alt="B">
      </div>
      <span>B b</span>
    </div>
    <div class="letter" 
	data-sound="sounds/j_wie_jacke.mp3"
	data-modal-text='die <span class="highlight">J</span>acke'>
      <div class="img-wrapper">
        <img src="images/jacke.jpg" alt="J">
      </div>
      <span>J j</span>
    </div>
    <div class="letter" 
	data-sound="sounds/h_wie_hut.mp3"
	data-modal-text='der <span class="highlightm">H</span>ut'>
      <div class="img-wrapper">
        <img src="images/hut.jpg" alt="H">
      </div>
      <span>H h</span>
    </div>
    <div class="letter" 
	data-sound="sounds/n_wie_nashorn.mp3"
	data-modal-text='das <span class="highlightn">N</span>ashorn'>
      <div class="img-wrapper">
        <img src="images/nashorn.jpg" alt="N">
      </div>
      <span>N n </span>
    </div>
     <div class="letter" 
	data-sound="sounds/z_wie_zirkus.mp3"
	data-modal-text='der <span class="highlightm">Z</span>irkus'>
      <div class="img-wrapper">
        <img src="images/zirkus.jpg" alt="Z">
      </div>
      <span>Z z</span>
    </div>
    <div class="letter" 
	data-sound="sounds/t_wie_tiger.mp3"
	data-modal-text='der <span class="highlightm">T</span>iger'>
      <div class="img-wrapper">
        <img src="images/tiger.jpg" alt="T">
      </div>
      <span>T t</span>
    </div>
    <div class="letter" 
	data-sound="sounds/f_wie_fisch.mp3"
	data-modal-text='der <span class="highlightm">F</span>isch'>
      <div class="img-wrapper">
        <img src="images/fisch.jpg" alt="F">
      </div>
      <span>F f </span>
    </div>
    <div class="letter" 
	data-sound="sounds/k_wie_kaenguru.mp3"
	data-modal-text='das <span class="highlightn">K</span>änguru'>
      <div class="img-wrapper">
        <img src="images/kaenguru.jpg" alt="K">
      </div>
      <span>K k </span>
    </div>
    <div class="letter" 
	data-sound="sounds/p_wie__pinguin.mp3"
	data-modal-text='der <span class="highlightm">P</span>inguin'>
      <div class="img-wrapper">
        <img src="images/pinguin.jpg" alt="P">
      </div>
      <span>P p</span>
    </div>
    <div class="letter" 
	data-sound="sounds/r_wie_rabe.mp3"
	data-modal-text='der <span class="highlightm">R</span>abe'>
      <div class="img-wrapper">
        <img src="images/rabe.jpg" alt="R">
      </div>
      <span>R r</span>
    </div>
    <div class="letter" 
	data-sound="sounds/l_wie_loewe.mp3"
	data-modal-text='der <span class="highlightm">L</span>öwe'>
      <div class="img-wrapper">
        <img src="images/loewe.jpg" alt="L">
      </div>
      <span>L l</span>
    </div>
    <div class="letter" data-sound="sounds/ch_wie_buch.mp3"
	data-modal-text='das Bu<span class="highlightn">ch</span>'>
      <div class="img-wrapper">
        <img src="images/buch.jpg" alt="CH">
      </div>
      <span> ch </span>
    </div>
    <div class="letter" 
	data-sound="sounds/ch_wie_milch.mp3"
	data-modal-text='die Mil<span class="highlight">ch</span>'>
      <div class="img-wrapper">
        <img src="images/milch.jpg" alt="CH">
      </div>
      <span>ch </span>
    </div>
     <div class="letter" 
	data-sound="sounds/ng_wie_ring.mp3"
	data-modal-text='der Ri<span class="highlightm">ng</span>'>
      <div class="img-wrapper">
        <img src="images/ring.jpg" alt="NG">
      </div>
      <span>ng</span>
    </div>
    <div class="letter" 
	data-sound="sounds/nk_wie_bank.mp3"
	data-modal-text='die Ba<span class="highlight">nk</span>'>
      <div class="img-wrapper">
        <img src="images/bank.jpg" alt="NK">
      </div>
      <span>nk</span>
    </div>
    <div class="letter" 
	data-sound="sounds/sch_wie_schaf.mp3"
	data-modal-text='das <span class="highlightn">Sch</span>af'>
      <div class="img-wrapper">
        <img src="images/schaf.jpg" alt="SCH">
      </div>
      <span>sch </span>
    </div>
    <div class="letter" 
	data-sound="sounds/sp_wie_spinne.mp3"
	data-modal-text='die <span class="highlight">Sp</span>inne'>
      <div class="img-wrapper">
        <img src="images/spinne.jpg" alt="sp">
      </div>
      <span>sp </span>
    </div>
    <div class="letter" 
	data-sound="sounds/st_wie_stern.mp3"
	data-modal-text='der <span class="highlightm">St</span>ern'>

      <div class="img-wrapper">
        <img src="images/stern.jpg" alt="ST">
      </div>
      <span>st</span>
    </div>
    <div class="letter" 
	data-sound="sounds/qu_wie_qualle.mp3"
	data-modal-text='die <span class="highlight">Qu</span>alle'>
      <div class="img-wrapper">
        <img src="images/qualle.jpg" alt="QU">
      </div>
      <span>Qu qu</span>
    </div>
    <div class="letter" 
	data-sound="sounds/c_wie_computer.mp3"
	data-modal-text='der <span class="highlightm">C</span>omputer'>
      <div class="img-wrapper">
        <img src="images/computer.jpg" alt="C">
      </div>
      <span>C c</span>
    </div>
    <div class="letter" 
	data-sound="sounds/x_wie_xylofon.mp3"
	data-modal-text='das <span class="highlightn">X</span>ylophon'>
      <div class="img-wrapper">
        <img src="images/xylophone.jpg" alt="X">
      </div>
      <span> X x </span>
    </div>
     <div class="letter" 
	data-sound="sounds/pf_wie_pferd.mp3"
	data-modal-text='das <span class="highlightn">Pf</span>erd'>
      <div class="img-wrapper">
        <img src="images/pferd.jpg" alt="PF">
      </div>
      <span>Pf pf</span>
    </div>
    <div class="letter" 
	data-sound="sounds/v_wie_vogel.mp3"
	data-modal-text='der <span class="highlightm">V</span>ogel'>
      <div class="img-wrapper">
        <img src="images/vogel.jpg" alt="V">
      </div>
      <span>V v</span>
    </div>
    <div class="letter" 
	data-sound="sounds/sz_wie_fusz.mp3"
	data-modal-text='der Fu<span class="highlightm">ß</span>'>
      <div class="img-wrapper">
        <img src="images/fuss.jpg" alt="SS">
      </div>
      <span>ß</span>
    </div>
    <div class="letter" 
	data-sound="sounds/y_wie_yak.mp3"
	data-modal-text='der <span class="highlightm">Y</span>ak'>
      <div class="img-wrapper">
        <img src="images/yak.jpg" alt="Y">
      </div>
      <span> Y y </span>
    </div>
    <div class="letter" 
	data-sound="sounds/ie_wie_biene.mp3"
	data-modal-text='die B<span class="highlight">ie</span>ne'>
      <div class="img-wrapper">
        <img src="images/biene.jpg" alt="B">
      </div>
      <span> ie </span>
    </div>
  </div>
<div id="overlay" class="overlay">
    <div class="modal">
      <div id="modalLetter" class="modal-letter"></div>
    </div>
  </div>
<script>
let currentAudio = null;
const overlay = document.getElementById('overlay');
const modalLetter = document.getElementById('modalLetter');
let activeCard = null;

function playSound(src, onEnded) {
  if (!src) return null;
  if (currentAudio) {
    currentAudio.pause();
    currentAudio.currentTime = 0;
  }
  const audio = new Audio(src);
  currentAudio = audio;
  audio.play().catch(()=>{});
  audio.onended = () => { if(onEnded) onEnded(); };
  return audio;
}

// Подстройка шрифта, чтобы текст помещался
function adjustFontSize(element, maxWidth) {
  let fontSize = parseInt(window.getComputedStyle(element).fontSize);
  while (element.scrollWidth > maxWidth && fontSize > 10) {
    fontSize -= 1;
    element.style.fontSize = fontSize + "px";
  }
}

function openModalForCard(card, soundFile) {
  activeCard = card;
  card.classList.add('hide-img');

  const modalHTML = card.getAttribute('data-modal-text') || card.querySelector('span')?.textContent;
  modalLetter.innerHTML = modalHTML;

  overlay.classList.add('show');
  document.body.style.overflow = 'hidden';

  // Подгоняем размер шрифта под ширину модального окна
  adjustFontSize(modalLetter, modalLetter.parentElement.clientWidth - 20);

  playSound(soundFile, closeModal);
}

function closeModal() {
  if (activeCard) {
    activeCard.classList.remove('hide-img');
    activeCard = null;
  }
  overlay.classList.remove('show');
  document.body.style.overflow = '';
  if(currentAudio){
    currentAudio.pause();
    currentAudio.currentTime = 0;
  }
}

// Клик по карточке
document.querySelectorAll('.letter').forEach(letter => {
  letter.addEventListener('click', () => {
    const soundFile = letter.getAttribute('data-sound');
    openModalForCard(letter, soundFile);
  });
  letter.addEventListener('touchstart', () => letter.classList.add('active'));
  letter.addEventListener('touchend', () => letter.classList.remove('active'));
});

// Клик по overlay (фон) для закрытия модального окна
overlay.addEventListener('click', (event) => {
  if(event.target === overlay){
    closeModal();
  }
});
</script>

</body>
</html>
